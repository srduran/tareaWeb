<% if Category.exists? %>
<%= form_for(document) do |f| %>
  <% if document.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(document.errors.count, "error") %> prohibited this document from being saved:</h2>

      <ul>
      <% document.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %>
    <br>
    <%= f.text_field :title %>
  </div>

  <div class="text-field">
    <%= f.label :text %>
    <br>
    <div class="text-preview">
    <%= f.text_area :text , 'data-provide' => "markdown", 'data-iconlibrary' => "fa", class: "form-control" %>
    </div>
  </div>

  <div class="field">
    <%= f.label :categories_id %>
    <%= f.select :categories_id, options_for_select(Category.all.map{|s|[s.title,s.id]}) %>

    <!-- Todavía no hace mucho -->
    <%= select_tag 'category-select' , options_for_select(Category.all.collect{|s|[s.title, s.id]}) %>
    <button type="button" id="add-category" class="Add btn-success btn-sm">
      Add
    </button>
    <div class="create-categories" id="all-categories">
    <% @show_enrollments.each do |enrollment|%>
        <a class="badge badge-info">
          <%= enrollment.category.title %>
        </a>
    <%end%>
    </div>
    <!-- fin de segmento -->
  </div>

  <div class="field">
    <%= f.label :public %>
    <%= f.check_box :public %>
  </div>
  <br>
  <div class="actions">
    <%= f.submit "Submit", :class => 'btn btn-success btn-sm' %>
  </div>

<% end %>
<%else%>
    <div>
      <%="You must create a category first"%>
    </div>
    <br>
<%end%>

<!-- No es muy util todavía -->
<script>
  $(document).ready(function (){
     $("#add-category").click(function (){
         var category = $("#category-select").find(":selected").text();
         var newHtml =  "<a class='badge badge-info'> " + category  + "</a> ";
         $("#all-categories").append(newHtml);
     });
  });
</script>